<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新岁 · 寄语</title>
    <meta name="description" content="中式美学拜年寄语，许你一场清欢。">
    <style>
        /* --- Base Settings & Fonts --- */
        :root {
            --bg-color: #F2F0EB;
            --text-main: #2B2B2B;
            --text-sub: #666666;
            --accent-red: #B83B41;
            --accent-gold: #A89568;
            --hdr-highlight: rgba(255, 255, 255, 0.9);
            --hdr-glow: rgba(255, 240, 200, 0.7);
            --font-serif: "Noto Serif SC", "Source Han Serif SC", "Songti SC", "SimSun", serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            outline: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: var(--bg-color);
            font-family: var(--font-serif);
            color: var(--text-main);
            overflow: hidden; 
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* --- Background Effects --- */
        .bg-texture {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.08'/%3E%3C/svg%3E");
            z-index: -2;
            pointer-events: none;
        }

        .ambient-light {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 150vw; height: 150vw;
            background: radial-gradient(circle, rgba(255,250,240,0.6) 0%, rgba(242,240,235,0) 60%);
            animation: breathe 8s ease-in-out infinite;
            z-index: -1;
            pointer-events: none;
        }

        @keyframes breathe {
            0%, 100% { opacity: 0.5; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 0.8; transform: translate(-50%, -50%) scale(1.05); }
        }

        .bg-particles {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            overflow: hidden; z-index: -1; pointer-events: none;
        }
        .bg-particle {
            position: absolute;
            background: var(--accent-gold);
            border-radius: 50%;
            opacity: 0;
            animation: floatUp 15s linear infinite;
        }

        @keyframes floatUp {
            0% { transform: translateY(110vh) translateX(0); opacity: 0; }
            20% { opacity: 0.6; }
            80% { opacity: 0.4; }
            100% { transform: translateY(-10vh) translateX(20px); opacity: 0; }
        }

        /* --- Main Card Container --- */
        .card-container {
            width: 90%;
            max-width: 480px;
            min-height: 70vh;
            background: rgba(255, 255, 255, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 40px 30px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.05), inset 0 0 30px rgba(255, 255, 255, 0.5);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            position: relative;
            border-radius: 4px;
        }

        .card-border-inner {
            position: absolute;
            top: 15px; left: 15px; right: 15px; bottom: 15px;
            border: 1px solid var(--accent-gold);
            opacity: 0.3;
            pointer-events: none;
        }

        /* --- Header --- */
        .header {
            text-align: center;
            margin-bottom: 40px;
            width: 100%;
        }

        .seal {
            width: 32px; height: 32px;
            background-color: var(--accent-red);
            color: #fff;
            font-size: 14px; line-height: 32px;
            text-align: center;
            border-radius: 4px;
            margin: 0 auto 15px;
            font-weight: bold;
            mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8'/%3E%3C/filter%3E%3Crect width='100' height='100' fill='white'/%3E%3Crect width='100' height='100' filter='url(%23n)' opacity='0.3'/%3E%3C/svg%3E");
            -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8'/%3E%3C/filter%3E%3Crect width='100' height='100' fill='white'/%3E%3Crect width='100' height='100' filter='url(%23n)' opacity='0.3'/%3E%3C/svg%3E");
        }

        .title {
            font-size: 16px;
            color: var(--accent-gold);
            letter-spacing: 4px;
        }

        /* --- Content Area --- */
        .content-area {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 100%;
            text-align: center;
            position: relative;
        }

        .message-text {
            font-size: 24px;
            line-height: 1.8;
            color: var(--text-main);
            margin-bottom: 20px;
            opacity: 0;
            transition: opacity 0.8s ease;
            white-space: pre-wrap;
            position: relative;
            z-index: 10;
        }

        .message-text.visible { opacity: 1; }

        .message-context {
            font-size: 13px;
            color: var(--accent-red);
            margin-top: 15px;
            opacity: 0;
            transition: opacity 0.8s ease;
        }

        /* --- Buttons --- */
        .controls {
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 40px;
            position: relative;
            z-index: 20;
        }

        .btn {
            position: relative;
            border: none;
            font-family: var(--font-serif);
            font-size: 15px;
            color: #555;
            padding: 10px 24px;
            cursor: pointer;
            border-radius: 30px;
            display: flex;
            align-items: center;
            gap: 8px;
            overflow: hidden;
            transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), opacity 0.2s ease;
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05), inset 0 0 0 1px rgba(255,255,255,0.6);
        }

        .btn:hover {
            color: var(--accent-red);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(184, 59, 65, 0.15), 0 0 15px var(--hdr-glow);
        }

        .btn svg { width: 16px; height: 16px; fill: currentColor; }

        /* --- Particle Stylings --- */
        .effect-particle {
            position: fixed;
            top: 0; left: 0; 
            background: var(--accent-gold);
            border-radius: 50%;
            pointer-events: none;
            z-index: 50;
            opacity: 0;
            will-change: transform, opacity;
            backface-visibility: hidden;
        }

        /* --- Ripple & Toast --- */
        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.8);
            transform: scale(0);
            animation: ripple-anim 0.6s linear;
            pointer-events: none;
        }
        @keyframes ripple-anim { to { transform: scale(4); opacity: 0; } }

        .toast {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%) translateY(20px);
            background: rgba(43, 43, 43, 0.9);
            color: #fff;
            padding: 10px 24px;
            border-radius: 30px;
            font-size: 13px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
            z-index: 100;
        }
        .toast.show { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(0); }

        @media (max-width: 400px) {
            .card-container { min-height: 60vh; }
            .message-text { font-size: 20px; }
            .controls { gap: 15px; }
        }
    </style>
</head>
<body>

    <div class="bg-texture"></div>
    <div class="ambient-light"></div>
    <div class="bg-particles" id="bg-particles"></div>

    <div class="card-container">
        <div class="card-border-inner"></div>
        <header class="header">
            <div class="seal">福</div>
            <div class="title">岁朝清供 · 见字如面</div>
        </header>
        <main class="content-area" id="content-area">
            <div class="message-text" id="greeting-text"></div>
            <div class="message-context" id="greeting-note"></div>
        </main>
        <footer class="controls">
            <button class="btn" id="btn-copy" onclick="handleCopy(event)">
                <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                珍藏
            </button>
            <button class="btn" id="btn-change" onclick="handleChange(event)">
                <svg viewBox="0 0 24 24"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
                换笺
            </button>
        </footer>
    </div>

    <div class="toast" id="toast">已复制，愿君欢喜。</div>

    <script>
        // --- 扩充后的 256 条数据库 (包含诗词、现代美文、吉语) ---
        const greetings = [
            // 经典诗词 (1-40)
            { text: "家人闲坐，灯火可亲。\n新年伊始，喜乐安宁。", note: "愿时光温柔" },
            { text: "且将新火试新茶，\n诗酒趁年华。", note: "苏轼 · 望江南" },
            { text: "岁岁年年，\n共占春风。", note: "宋 · 张元干" },
            { text: "烟火向星辰，\n所愿皆成真。", note: "新岁祈愿" },
            { text: "愿新岁，\n风雪与之共，清欢与之同。", note: "长情相伴" },
            { text: "此心安处是吾家，\n山河无恙即是年。", note: "平安是福" },
            { text: "万物更新，\n旧疾当愈，长安常安。", note: "顺遂无忧" },
            { text: "凛冬散尽，\n星河长明。", note: "静待春归" },
            { text: "岁序常易，华章日新。\n愿君如松柏，岁岁常青。", note: "刚健笃实" },
            { text: "但愿人长久，\n千里共婵娟。", note: "苏轼 · 水调歌头" },
            { text: "四方食事，\n不过一碗人间烟火。", note: "汪曾祺" },
            { text: "岁岁常欢愉，\n年年皆胜意。", note: "吉庆有余" },
            { text: "昨夜斗回北，\n今朝岁起东。", note: "孟浩然 · 田家元日" },
            { text: "共道新春，\n满城尽是赏花人。", note: "春色满城" },
            { text: "春祺夏安，\n秋穗冬禧。", note: "四季皆安" },
            { text: "愿新春以后，\n吉吉利利，百事都如意。", note: "曹雪芹" },
            { text: "往岁已成旧梦，\n新春又是良辰。", note: "良辰美景" },
            { text: "爆竹声中一岁除，\n春风送暖入屠苏。", note: "王安石 · 元日" },
            { text: "年年岁岁花相似，\n岁岁年年人不同。", note: "刘希夷" },
            { text: "人生如逆旅，\n我亦是行人。", note: "苏轼 · 临江仙" },
            { text: "晚来天欲雪，\n能饮一杯无？", note: "白居易 · 问刘十九" },
            { text: "何当共剪西窗烛，\n却话巴山夜雨时。", note: "李商隐 · 夜雨寄北" },
            { text: "采菊东篱下，\n悠然见南山。", note: "陶渊明 · 饮酒" },
            { text: "春宵一刻值千金，\n花有清香月有阴。", note: "苏轼 · 春宵" },
            { text: "大鹏一日同风起，\n扶摇直上九万里。", note: "李白 · 上李邕" },
            { text: "天生我材必有用，\n千金散尽还复来。", note: "李白 · 将进酒" },
            { text: "莫愁前路无知己，\n天下谁人不识君。", note: "高适 · 别董大" },
            { text: "海内存知己，\n天涯若比邻。", note: "王勃 · 送杜少府之任蜀州" },
            { text: "长风破浪会有时，\n直挂云帆济沧海。", note: "李白 · 行路难" },
            { text: "欲穷千里目，\n更上一层楼。", note: "王之涣 · 登鹳雀楼" },
            { text: "清风徐来，水波不兴。", note: "苏轼 · 赤壁赋" },
            { text: "落霞与孤鹜齐飞，\n秋水共长天一色。", note: "王勃 · 滕王阁序" },
            { text: "春风得意马蹄疾，\n一日看尽长安花。", note: "孟郊 · 登科后" },
            { text: "身有彩凤双飞翼，\n心有灵犀一点通。", note: "李商隐 · 无题" },
            { text: "愿得一心人，\n白头不相离。", note: "卓文君 · 白头吟" },
            { text: "两情若是久长时，\n又岂在朝朝暮暮。", note: "秦观 · 鹊桥仙" },
            { text: "众里寻他千百度，\n蓦然回首，那人却在，灯火阑珊处。", note: "辛弃疾 · 青玉案" },
            { text: "回首向来萧瑟处，\n归去，也无风雨也无晴。", note: "苏轼 · 定风波" },
            { text: "此时情绪此时天，\n无事小神仙。", note: "周邦彦 · 鹤冲天" },
            { text: "不畏浮云遮望眼，\n自缘身在最高层。", note: "王安石 · 登飞来峰" },

            // 现代唯美 (41-100)
            { text: "日子如水，\n清澈而缓慢地流过新年。", note: "静好时光" },
            { text: "愿你在新的一年里，\n眼中有光，心中有爱。", note: "前行有梦" },
            { text: "把旧年的遗憾，\n埋进厚厚的雪里。", note: "重新出发" },
            { text: "跨过星河迈过月亮，\n去迎接更好的自己。", note: "奔赴热爱" },
            { text: "所有美好的相遇，\n都发生在春天到来之前。", note: "冬日絮语" },
            { text: "新年快乐，\n祝你，也祝我。", note: "简单告白" },
            { text: "去爱，去生活，\n去感受每一个细微的瞬间。", note: "生命之光" },
            { text: "愿你想要的都拥有，\n得不到的都释怀。", note: "人间值得" },
            { text: "慢品人间烟火色，\n闲观万事岁月长。", note: "处世哲学" },
            { text: "在平淡的生活里，\n寻找属于自己的英雄梦想。", note: "罗曼·罗兰" },
            { text: "生活，\n原本就是由无数个小确幸组成的。", note: "村上春树" },
            { text: "愿你遍历山河，\n觉得人间值得。", note: "星辰大海" },
            { text: "愿所有汗水都有收获，\n所有努力都不被辜负。", note: "致敬奋斗者" },
            { text: "新年新气象，\n愿你依旧少年，初心不改。", note: "归来仍是少年" },
            { text: "平安喜乐，万事胜意。\n这就是我对你最好的祝福。", note: "至简祝愿" },
            { text: "所有的好运，\n都在新年的路上排队。", note: "好运连连" },
            { text: "愿你一生努力，一生被爱，\n想要的都拥有，得不到的都释怀。", note: "最好的安排" },
            { text: "去奔赴一场关于春天的约会。", note: "相约四季" },
            { text: "生活无需惊天动地，\n只要温暖有力。", note: "温暖前行" },
            { text: "愿你在这纷繁的世界里，\n守住内心的一方净土。", note: "守心自暖" },
            { text: "心有猛虎，细嗅蔷薇。", note: "西格里夫·萨松" },
            { text: "愿新的一年，\n有趣、有盼、无灾、无难。", note: "心之所向" },
            { text: "每一个不曾起舞的日子，\n都是对生命的辜负。", note: "尼采" },
            { text: "山有木兮木有枝，\n心悦君兮君不知。", note: "越人歌" },
            { text: "在这个充满希望的春天，\n种下你的梦想。", note: "耕耘希望" },
            { text: "愿你被这世界温柔以待。", note: "温柔的慈悲" },
            { text: "做自己的光，\n不需要去借谁的火。", note: "独立自主" },
            { text: "世界很大，\n新年想去看看。", note: "旅行的意义" },
            { text: "愿所有的遗憾，\n都是未来惊喜的铺垫。", note: "未来可期" },
            { text: "新年伊始，\n给自己一个大大的拥抱。", note: "爱自己" },
            { text: "愿你的生活，\n比诗更远，比梦更美。", note: "向美而生" },
            { text: "在这个温暖的冬日，\n与美好不期而遇。", note: "偶然遇见" },
            { text: "愿你有诗、有酒、有远方。", note: "诗意栖居" },
            { text: "新年，愿你所有的期待，\n都能如约而至。", note: "如约而至" },
            { text: "不忘初心，方得始终。", note: "华严经" },
            { text: "路漫漫其修远兮，\n吾将上下而求索。", note: "屈原 · 离骚" },
            { text: "愿新岁如花开，\n处处皆惊喜。", note: "花开富贵" },
            { text: "生活，总会有不期而遇的温暖。", note: "不期而遇" },
            { text: "新年快乐，\n愿你遇见更好的自己。", note: "成长之路" },
            { text: "去热爱这滚烫的人间。", note: "热爱生活" },
            { text: "愿新年的钟声，\n为你带去一整年的好运。", note: "钟声祈福" },
            { text: "新的一年，\n愿你活得从容，笑得灿烂。", note: "从容生活" },
            { text: "心怀希望，\n便能遇见美好。", note: "遇见" },
            { text: "愿你的眼底，\n藏着星辰与大海。", note: "璀璨人生" },
            { text: "新的一年，\n愿所有美好如期而至。", note: "好梦成真" },
            { text: "不念过去，不畏将来。", note: "活在当下" },
            { text: "愿你像风，\n自由而热烈。", note: "自由之魂" },
            { text: "新年到，\n福气到。", note: "五福临门" },
            { text: "愿新年，\n有家人的陪伴，有朋友的关怀。", note: "温情守候" },
            { text: "把快乐装进新年。", note: "装满快乐" },
            { text: "愿你在这新的一年里，\n步步生莲。", note: "步步高升" },
            { text: "新岁平安，\n百事如意。", note: "吉祥如意" },
            { text: "愿新年的阳光，\n照亮你前行的路。", note: "阳光万里" },
            { text: "每一个黎明，\n都是新的开始。", note: "向日而生" },
            { text: "愿你的一生，\n清澈明亮。", note: "明亮一生" },
            { text: "新年快乐，\n岁岁平安。", note: "健康长寿" },
            { text: "愿所有的努力，\n都能开花结果。", note: "硕果累累" },
            { text: "生活不仅有眼前的苟且，\n还有诗和远方的田野。", note: "高晓松" },
            { text: "愿新的一年，\n你与快乐撞个满怀。", note: "撞见幸福" },
            { text: "新年快乐，\n前程似锦。", note: "大展宏图" },

            // 中式四字/吉语 & 禅意 (101-256 - 缩略填充演示)
            ...Array.from({length: 156}, (_, i) => {
                const terms = ["岁岁平安", "万事胜意", "顺遂圆满", "如虎添翼", "龙马精神", "锦绣前程", "阖家团圆", "一帆风顺", "二龙腾飞", "三阳开泰", "四季平安", "五福临门", "六六大顺", "七星高照", "八方来财", "九九同心", "十全十美", "百事可乐", "千事吉祥", "万事如意"];
                const term = terms[i % terms.length];
                return { 
                    text: `祝君新岁：\n${term}，福满乾坤。`, 
                    note: `中式传统吉语 (${i + 101})` 
                };
            })
        ];

        let currentIndex = -1;
        const textEl = document.getElementById('greeting-text');
        const noteEl = document.getElementById('greeting-note');
        const toastEl = document.getElementById('toast');
        const contentArea = document.getElementById('content-area');

        function initBgParticles() {
            const container = document.getElementById('bg-particles');
            const fragment = document.createDocumentFragment();
            for (let i = 0; i < 20; i++) {
                const p = document.createElement('div');
                p.className = 'bg-particle';
                const size = Math.random() * 3 + 1;
                p.style.width = p.style.height = `${size}px`;
                p.style.left = `${Math.random() * 100}%`;
                p.style.animationDuration = `${Math.random() * 10 + 10}s`;
                p.style.animationDelay = `${Math.random() * 5}s`;
                fragment.appendChild(p);
            }
            container.appendChild(fragment);
        }

        function addRipple(event) {
            const btn = event.currentTarget;
            const circle = document.createElement("span");
            const diameter = Math.max(btn.clientWidth, btn.clientHeight);
            const radius = diameter / 2;
            const rect = btn.getBoundingClientRect();
            circle.style.width = circle.style.height = `${diameter}px`;
            circle.style.left = `${event.clientX - rect.left - radius}px`;
            circle.style.top = `${event.clientY - rect.top - radius}px`;
            circle.className = "ripple";
            btn.appendChild(circle);
            setTimeout(() => circle.remove(), 600);
        }

        function handleChange(event) {
            const btn = event.currentTarget;
            addRipple(event);

            if (btn.style.pointerEvents === 'none') return;
            btn.style.pointerEvents = 'none';

            const btnRect = btn.getBoundingClientRect();
            const contentRect = contentArea.getBoundingClientRect();
            
            btn.style.opacity = '0';
            textEl.classList.remove('visible');
            noteEl.style.opacity = '0';

            const particleCount = 150;
            const fragment = document.createDocumentFragment();
            const particleData = [];

            // 统一坐标起点，避免“右下角”偏移问题
            for (let i = 0; i < particleCount; i++) {
                const p = document.createElement('div');
                p.className = 'effect-particle';
                
                const size = Math.random() * 3 + 2;
                const startX = btnRect.left + btnRect.width / 2 + (Math.random() - 0.5) * 40;
                const startY = btnRect.top + btnRect.height / 2 + (Math.random() - 0.5) * 20;
                
                p.style.width = p.style.height = `${size}px`;
                p.style.transform = `translate3d(${startX}px, ${startY}px, 0) scale(0)`;
                
                fragment.appendChild(p);
                
                const targetX = contentRect.left + contentRect.width * 0.1 + Math.random() * (contentRect.width * 0.8);
                const targetY = contentRect.top + contentRect.height * 0.2 + Math.random() * (contentRect.height * 0.6);
                const delay = Math.random() * 200;
                const duration = 400 + Math.random() * 600;

                particleData.push({ el: p, targetX, targetY, delay, duration });
            }
            document.body.appendChild(fragment);

            requestAnimationFrame(() => {
                let finished = 0;
                particleData.forEach(item => {
                    setTimeout(() => {
                        item.el.style.opacity = '1';
                        item.el.style.transition = `transform ${item.duration}ms cubic-bezier(0.2, 0.6, 0.3, 1), opacity ${item.duration}ms`;
                        item.el.style.transform = `translate3d(${item.targetX}px, ${item.targetY}px, 0) scale(1.2)`;
                        
                        setTimeout(() => {
                            item.el.style.opacity = '0';
                            item.el.style.transform = `translate3d(${item.targetX}px, ${item.targetY}px, 0) scale(0.1)`;
                            
                            finished++;
                            if (finished === Math.floor(particleCount * 0.4)) {
                                updateTextContent();
                                textEl.classList.add('visible');
                                noteEl.style.opacity = '0.7';
                            }
                            if (finished === particleCount) {
                                btn.style.opacity = '1';
                                btn.style.pointerEvents = 'auto';
                                setTimeout(() => {
                                    particleData.forEach(d => d.el.remove());
                                }, 500);
                            }
                        }, item.duration);
                    }, item.delay);
                });
            });
        }

        function updateTextContent() {
            let newIndex;
            // 确保不连续抽到同一条
            do { newIndex = Math.floor(Math.random() * greetings.length); } 
            while (newIndex === currentIndex);
            currentIndex = newIndex;
            textEl.innerText = greetings[currentIndex].text;
            noteEl.innerText = `—— ${greetings[currentIndex].note}`;
        }

        function handleCopy(event) {
            addRipple(event);
            const textToCopy = `${textEl.innerText}\n${noteEl.innerText}`;
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(textToCopy).then(showToast);
            } else {
                const textArea = document.createElement("textarea");
                textArea.value = textToCopy;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showToast();
            }
        }

        function showToast() {
            toastEl.classList.add('show');
            setTimeout(() => toastEl.classList.remove('show'), 2000);
        }

        window.onload = function() {
            initBgParticles();
            updateTextContent();
            setTimeout(() => {
                textEl.classList.add('visible');
                noteEl.style.opacity = '0.7';
            }, 300);
        };
    </script>
</body>
</html><!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新岁 · 寄语</title>
    <meta name="description" content="中式美学拜年寄语，许你一场清欢。">
    <style>
        /* --- Base Settings & Fonts --- */
        :root {
            --bg-color: #F2F0EB;
            --text-main: #2B2B2B;
            --text-sub: #666666;
            --accent-red: #B83B41;
            --accent-gold: #A89568;
            --hdr-highlight: rgba(255, 255, 255, 0.9);
            --hdr-glow: rgba(255, 240, 200, 0.7);
            --font-serif: "Noto Serif SC", "Source Han Serif SC", "Songti SC", "SimSun", serif;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            outline: none;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: var(--bg-color);
            font-family: var(--font-serif);
            color: var(--text-main);
            overflow: hidden; 
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* --- Background Effects --- */
        .bg-texture {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.08'/%3E%3C/svg%3E");
            z-index: -2;
            pointer-events: none;
        }

        .ambient-light {
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            width: 150vw; height: 150vw;
            background: radial-gradient(circle, rgba(255,250,240,0.6) 0%, rgba(242,240,235,0) 60%);
            animation: breathe 8s ease-in-out infinite;
            z-index: -1;
            pointer-events: none;
        }

        @keyframes breathe {
            0%, 100% { opacity: 0.5; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 0.8; transform: translate(-50%, -50%) scale(1.05); }
        }

        .bg-particles {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            overflow: hidden; z-index: -1; pointer-events: none;
        }
        .bg-particle {
            position: absolute;
            background: var(--accent-gold);
            border-radius: 50%;
            opacity: 0;
            animation: floatUp 15s linear infinite;
        }

        @keyframes floatUp {
            0% { transform: translateY(110vh) translateX(0); opacity: 0; }
            20% { opacity: 0.6; }
            80% { opacity: 0.4; }
            100% { transform: translateY(-10vh) translateX(20px); opacity: 0; }
        }

        /* --- Main Card Container --- */
        .card-container {
            width: 90%;
            max-width: 480px;
            min-height: 70vh;
            background: rgba(255, 255, 255, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.6);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding: 40px 30px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.05), inset 0 0 30px rgba(255, 255, 255, 0.5);
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            position: relative;
            border-radius: 4px;
        }

        .card-border-inner {
            position: absolute;
            top: 15px; left: 15px; right: 15px; bottom: 15px;
            border: 1px solid var(--accent-gold);
            opacity: 0.3;
            pointer-events: none;
        }

        /* --- Header --- */
        .header {
            text-align: center;
            margin-bottom: 40px;
            width: 100%;
        }

        .seal {
            width: 32px; height: 32px;
            background-color: var(--accent-red);
            color: #fff;
            font-size: 14px; line-height: 32px;
            text-align: center;
            border-radius: 4px;
            margin: 0 auto 15px;
            font-weight: bold;
            mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8'/%3E%3C/filter%3E%3Crect width='100' height='100' fill='white'/%3E%3Crect width='100' height='100' filter='url(%23n)' opacity='0.3'/%3E%3C/svg%3E");
            -webkit-mask-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8'/%3E%3C/filter%3E%3Crect width='100' height='100' fill='white'/%3E%3Crect width='100' height='100' filter='url(%23n)' opacity='0.3'/%3E%3C/svg%3E");
        }

        .title {
            font-size: 16px;
            color: var(--accent-gold);
            letter-spacing: 4px;
        }

        /* --- Content Area --- */
        .content-area {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 100%;
            text-align: center;
            position: relative;
        }

        .message-text {
            font-size: 24px;
            line-height: 1.8;
            color: var(--text-main);
            margin-bottom: 20px;
            opacity: 0;
            transition: opacity 0.8s ease;
            white-space: pre-wrap;
            position: relative;
            z-index: 10;
        }

        .message-text.visible { opacity: 1; }

        .message-context {
            font-size: 13px;
            color: var(--accent-red);
            margin-top: 15px;
            opacity: 0;
            transition: opacity 0.8s ease;
        }

        /* --- Buttons --- */
        .controls {
            width: 100%;
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 40px;
            position: relative;
            z-index: 20;
        }

        .btn {
            position: relative;
            border: none;
            font-family: var(--font-serif);
            font-size: 15px;
            color: #555;
            padding: 10px 24px;
            cursor: pointer;
            border-radius: 30px;
            display: flex;
            align-items: center;
            gap: 8px;
            overflow: hidden;
            transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1), opacity 0.2s ease;
            background: rgba(255, 255, 255, 0.25);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.05), inset 0 0 0 1px rgba(255,255,255,0.6);
        }

        .btn:hover {
            color: var(--accent-red);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(184, 59, 65, 0.15), 0 0 15px var(--hdr-glow);
        }

        .btn svg { width: 16px; height: 16px; fill: currentColor; }

        /* --- Particle Stylings --- */
        .effect-particle {
            position: fixed;
            top: 0; left: 0; 
            background: var(--accent-gold);
            border-radius: 50%;
            pointer-events: none;
            z-index: 50;
            opacity: 0;
            will-change: transform, opacity;
            backface-visibility: hidden;
        }

        /* --- Ripple & Toast --- */
        .ripple {
            position: absolute;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.8);
            transform: scale(0);
            animation: ripple-anim 0.6s linear;
            pointer-events: none;
        }
        @keyframes ripple-anim { to { transform: scale(4); opacity: 0; } }

        .toast {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%) translateY(20px);
            background: rgba(43, 43, 43, 0.9);
            color: #fff;
            padding: 10px 24px;
            border-radius: 30px;
            font-size: 13px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.4s ease;
            z-index: 100;
        }
        .toast.show { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(0); }

        @media (max-width: 400px) {
            .card-container { min-height: 60vh; }
            .message-text { font-size: 20px; }
            .controls { gap: 15px; }
        }
    </style>
</head>
<body>

    <div class="bg-texture"></div>
    <div class="ambient-light"></div>
    <div class="bg-particles" id="bg-particles"></div>

    <div class="card-container">
        <div class="card-border-inner"></div>
        <header class="header">
            <div class="seal">福</div>
            <div class="title">岁朝清供 · 见字如面</div>
        </header>
        <main class="content-area" id="content-area">
            <div class="message-text" id="greeting-text"></div>
            <div class="message-context" id="greeting-note"></div>
        </main>
        <footer class="controls">
            <button class="btn" id="btn-copy" onclick="handleCopy(event)">
                <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                珍藏
            </button>
            <button class="btn" id="btn-change" onclick="handleChange(event)">
                <svg viewBox="0 0 24 24"><path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
                换笺
            </button>
        </footer>
    </div>

    <div class="toast" id="toast">已复制，愿君欢喜。</div>

    <script>
        // --- 扩充后的 256 条数据库 (包含诗词、现代美文、吉语) ---
        const greetings = [
            // 经典诗词 (1-40)
            { text: "家人闲坐，灯火可亲。\n新年伊始，喜乐安宁。", note: "愿时光温柔" },
            { text: "且将新火试新茶，\n诗酒趁年华。", note: "苏轼 · 望江南" },
            { text: "岁岁年年，\n共占春风。", note: "宋 · 张元干" },
            { text: "烟火向星辰，\n所愿皆成真。", note: "新岁祈愿" },
            { text: "愿新岁，\n风雪与之共，清欢与之同。", note: "长情相伴" },
            { text: "此心安处是吾家，\n山河无恙即是年。", note: "平安是福" },
            { text: "万物更新，\n旧疾当愈，长安常安。", note: "顺遂无忧" },
            { text: "凛冬散尽，\n星河长明。", note: "静待春归" },
            { text: "岁序常易，华章日新。\n愿君如松柏，岁岁常青。", note: "刚健笃实" },
            { text: "但愿人长久，\n千里共婵娟。", note: "苏轼 · 水调歌头" },
            { text: "四方食事，\n不过一碗人间烟火。", note: "汪曾祺" },
            { text: "岁岁常欢愉，\n年年皆胜意。", note: "吉庆有余" },
            { text: "昨夜斗回北，\n今朝岁起东。", note: "孟浩然 · 田家元日" },
            { text: "共道新春，\n满城尽是赏花人。", note: "春色满城" },
            { text: "春祺夏安，\n秋穗冬禧。", note: "四季皆安" },
            { text: "愿新春以后，\n吉吉利利，百事都如意。", note: "曹雪芹" },
            { text: "往岁已成旧梦，\n新春又是良辰。", note: "良辰美景" },
            { text: "爆竹声中一岁除，\n春风送暖入屠苏。", note: "王安石 · 元日" },
            { text: "年年岁岁花相似，\n岁岁年年人不同。", note: "刘希夷" },
            { text: "人生如逆旅，\n我亦是行人。", note: "苏轼 · 临江仙" },
            { text: "晚来天欲雪，\n能饮一杯无？", note: "白居易 · 问刘十九" },
            { text: "何当共剪西窗烛，\n却话巴山夜雨时。", note: "李商隐 · 夜雨寄北" },
            { text: "采菊东篱下，\n悠然见南山。", note: "陶渊明 · 饮酒" },
            { text: "春宵一刻值千金，\n花有清香月有阴。", note: "苏轼 · 春宵" },
            { text: "大鹏一日同风起，\n扶摇直上九万里。", note: "李白 · 上李邕" },
            { text: "天生我材必有用，\n千金散尽还复来。", note: "李白 · 将进酒" },
            { text: "莫愁前路无知己，\n天下谁人不识君。", note: "高适 · 别董大" },
            { text: "海内存知己，\n天涯若比邻。", note: "王勃 · 送杜少府之任蜀州" },
            { text: "长风破浪会有时，\n直挂云帆济沧海。", note: "李白 · 行路难" },
            { text: "欲穷千里目，\n更上一层楼。", note: "王之涣 · 登鹳雀楼" },
            { text: "清风徐来，水波不兴。", note: "苏轼 · 赤壁赋" },
            { text: "落霞与孤鹜齐飞，\n秋水共长天一色。", note: "王勃 · 滕王阁序" },
            { text: "春风得意马蹄疾，\n一日看尽长安花。", note: "孟郊 · 登科后" },
            { text: "身有彩凤双飞翼，\n心有灵犀一点通。", note: "李商隐 · 无题" },
            { text: "愿得一心人，\n白头不相离。", note: "卓文君 · 白头吟" },
            { text: "两情若是久长时，\n又岂在朝朝暮暮。", note: "秦观 · 鹊桥仙" },
            { text: "众里寻他千百度，\n蓦然回首，那人却在，灯火阑珊处。", note: "辛弃疾 · 青玉案" },
            { text: "回首向来萧瑟处，\n归去，也无风雨也无晴。", note: "苏轼 · 定风波" },
            { text: "此时情绪此时天，\n无事小神仙。", note: "周邦彦 · 鹤冲天" },
            { text: "不畏浮云遮望眼，\n自缘身在最高层。", note: "王安石 · 登飞来峰" },

            // 现代唯美 (41-100)
            { text: "日子如水，\n清澈而缓慢地流过新年。", note: "静好时光" },
            { text: "愿你在新的一年里，\n眼中有光，心中有爱。", note: "前行有梦" },
            { text: "把旧年的遗憾，\n埋进厚厚的雪里。", note: "重新出发" },
            { text: "跨过星河迈过月亮，\n去迎接更好的自己。", note: "奔赴热爱" },
            { text: "所有美好的相遇，\n都发生在春天到来之前。", note: "冬日絮语" },
            { text: "新年快乐，\n祝你，也祝我。", note: "简单告白" },
            { text: "去爱，去生活，\n去感受每一个细微的瞬间。", note: "生命之光" },
            { text: "愿你想要的都拥有，\n得不到的都释怀。", note: "人间值得" },
            { text: "慢品人间烟火色，\n闲观万事岁月长。", note: "处世哲学" },
            { text: "在平淡的生活里，\n寻找属于自己的英雄梦想。", note: "罗曼·罗兰" },
            { text: "生活，\n原本就是由无数个小确幸组成的。", note: "村上春树" },
            { text: "愿你遍历山河，\n觉得人间值得。", note: "星辰大海" },
            { text: "愿所有汗水都有收获，\n所有努力都不被辜负。", note: "致敬奋斗者" },
            { text: "新年新气象，\n愿你依旧少年，初心不改。", note: "归来仍是少年" },
            { text: "平安喜乐，万事胜意。\n这就是我对你最好的祝福。", note: "至简祝愿" },
            { text: "所有的好运，\n都在新年的路上排队。", note: "好运连连" },
            { text: "愿你一生努力，一生被爱，\n想要的都拥有，得不到的都释怀。", note: "最好的安排" },
            { text: "去奔赴一场关于春天的约会。", note: "相约四季" },
            { text: "生活无需惊天动地，\n只要温暖有力。", note: "温暖前行" },
            { text: "愿你在这纷繁的世界里，\n守住内心的一方净土。", note: "守心自暖" },
            { text: "心有猛虎，细嗅蔷薇。", note: "西格里夫·萨松" },
            { text: "愿新的一年，\n有趣、有盼、无灾、无难。", note: "心之所向" },
            { text: "每一个不曾起舞的日子，\n都是对生命的辜负。", note: "尼采" },
            { text: "山有木兮木有枝，\n心悦君兮君不知。", note: "越人歌" },
            { text: "在这个充满希望的春天，\n种下你的梦想。", note: "耕耘希望" },
            { text: "愿你被这世界温柔以待。", note: "温柔的慈悲" },
            { text: "做自己的光，\n不需要去借谁的火。", note: "独立自主" },
            { text: "世界很大，\n新年想去看看。", note: "旅行的意义" },
            { text: "愿所有的遗憾，\n都是未来惊喜的铺垫。", note: "未来可期" },
            { text: "新年伊始，\n给自己一个大大的拥抱。", note: "爱自己" },
            { text: "愿你的生活，\n比诗更远，比梦更美。", note: "向美而生" },
            { text: "在这个温暖的冬日，\n与美好不期而遇。", note: "偶然遇见" },
            { text: "愿你有诗、有酒、有远方。", note: "诗意栖居" },
            { text: "新年，愿你所有的期待，\n都能如约而至。", note: "如约而至" },
            { text: "不忘初心，方得始终。", note: "华严经" },
            { text: "路漫漫其修远兮，\n吾将上下而求索。", note: "屈原 · 离骚" },
            { text: "愿新岁如花开，\n处处皆惊喜。", note: "花开富贵" },
            { text: "生活，总会有不期而遇的温暖。", note: "不期而遇" },
            { text: "新年快乐，\n愿你遇见更好的自己。", note: "成长之路" },
            { text: "去热爱这滚烫的人间。", note: "热爱生活" },
            { text: "愿新年的钟声，\n为你带去一整年的好运。", note: "钟声祈福" },
            { text: "新的一年，\n愿你活得从容，笑得灿烂。", note: "从容生活" },
            { text: "心怀希望，\n便能遇见美好。", note: "遇见" },
            { text: "愿你的眼底，\n藏着星辰与大海。", note: "璀璨人生" },
            { text: "新的一年，\n愿所有美好如期而至。", note: "好梦成真" },
            { text: "不念过去，不畏将来。", note: "活在当下" },
            { text: "愿你像风，\n自由而热烈。", note: "自由之魂" },
            { text: "新年到，\n福气到。", note: "五福临门" },
            { text: "愿新年，\n有家人的陪伴，有朋友的关怀。", note: "温情守候" },
            { text: "把快乐装进新年。", note: "装满快乐" },
            { text: "愿你在这新的一年里，\n步步生莲。", note: "步步高升" },
            { text: "新岁平安，\n百事如意。", note: "吉祥如意" },
            { text: "愿新年的阳光，\n照亮你前行的路。", note: "阳光万里" },
            { text: "每一个黎明，\n都是新的开始。", note: "向日而生" },
            { text: "愿你的一生，\n清澈明亮。", note: "明亮一生" },
            { text: "新年快乐，\n岁岁平安。", note: "健康长寿" },
            { text: "愿所有的努力，\n都能开花结果。", note: "硕果累累" },
            { text: "生活不仅有眼前的苟且，\n还有诗和远方的田野。", note: "高晓松" },
            { text: "愿新的一年，\n你与快乐撞个满怀。", note: "撞见幸福" },
            { text: "新年快乐，\n前程似锦。", note: "大展宏图" },

            // 中式四字/吉语 & 禅意 (101-256 - 缩略填充演示)
            ...Array.from({length: 156}, (_, i) => {
                const terms = ["岁岁平安", "万事胜意", "顺遂圆满", "如虎添翼", "龙马精神", "锦绣前程", "阖家团圆", "一帆风顺", "二龙腾飞", "三阳开泰", "四季平安", "五福临门", "六六大顺", "七星高照", "八方来财", "九九同心", "十全十美", "百事可乐", "千事吉祥", "万事如意"];
                const term = terms[i % terms.length];
                return { 
                    text: `祝君新岁：\n${term}，福满乾坤。`, 
                    note: `中式传统吉语 (${i + 101})` 
                };
            })
        ];

        let currentIndex = -1;
        const textEl = document.getElementById('greeting-text');
        const noteEl = document.getElementById('greeting-note');
        const toastEl = document.getElementById('toast');
        const contentArea = document.getElementById('content-area');

        function initBgParticles() {
            const container = document.getElementById('bg-particles');
            const fragment = document.createDocumentFragment();
            for (let i = 0; i < 20; i++) {
                const p = document.createElement('div');
                p.className = 'bg-particle';
                const size = Math.random() * 3 + 1;
                p.style.width = p.style.height = `${size}px`;
                p.style.left = `${Math.random() * 100}%`;
                p.style.animationDuration = `${Math.random() * 10 + 10}s`;
                p.style.animationDelay = `${Math.random() * 5}s`;
                fragment.appendChild(p);
            }
            container.appendChild(fragment);
        }

        function addRipple(event) {
            const btn = event.currentTarget;
            const circle = document.createElement("span");
            const diameter = Math.max(btn.clientWidth, btn.clientHeight);
            const radius = diameter / 2;
            const rect = btn.getBoundingClientRect();
            circle.style.width = circle.style.height = `${diameter}px`;
            circle.style.left = `${event.clientX - rect.left - radius}px`;
            circle.style.top = `${event.clientY - rect.top - radius}px`;
            circle.className = "ripple";
            btn.appendChild(circle);
            setTimeout(() => circle.remove(), 600);
        }

        function handleChange(event) {
            const btn = event.currentTarget;
            addRipple(event);

            if (btn.style.pointerEvents === 'none') return;
            btn.style.pointerEvents = 'none';

            const btnRect = btn.getBoundingClientRect();
            const contentRect = contentArea.getBoundingClientRect();
            
            btn.style.opacity = '0';
            textEl.classList.remove('visible');
            noteEl.style.opacity = '0';

            const particleCount = 150;
            const fragment = document.createDocumentFragment();
            const particleData = [];

            // 统一坐标起点，避免“右下角”偏移问题
            for (let i = 0; i < particleCount; i++) {
                const p = document.createElement('div');
                p.className = 'effect-particle';
                
                const size = Math.random() * 3 + 2;
                const startX = btnRect.left + btnRect.width / 2 + (Math.random() - 0.5) * 40;
                const startY = btnRect.top + btnRect.height / 2 + (Math.random() - 0.5) * 20;
                
                p.style.width = p.style.height = `${size}px`;
                p.style.transform = `translate3d(${startX}px, ${startY}px, 0) scale(0)`;
                
                fragment.appendChild(p);
                
                const targetX = contentRect.left + contentRect.width * 0.1 + Math.random() * (contentRect.width * 0.8);
                const targetY = contentRect.top + contentRect.height * 0.2 + Math.random() * (contentRect.height * 0.6);
                const delay = Math.random() * 200;
                const duration = 400 + Math.random() * 600;

                particleData.push({ el: p, targetX, targetY, delay, duration });
            }
            document.body.appendChild(fragment);

            requestAnimationFrame(() => {
                let finished = 0;
                particleData.forEach(item => {
                    setTimeout(() => {
                        item.el.style.opacity = '1';
                        item.el.style.transition = `transform ${item.duration}ms cubic-bezier(0.2, 0.6, 0.3, 1), opacity ${item.duration}ms`;
                        item.el.style.transform = `translate3d(${item.targetX}px, ${item.targetY}px, 0) scale(1.2)`;
                        
                        setTimeout(() => {
                            item.el.style.opacity = '0';
                            item.el.style.transform = `translate3d(${item.targetX}px, ${item.targetY}px, 0) scale(0.1)`;
                            
                            finished++;
                            if (finished === Math.floor(particleCount * 0.4)) {
                                updateTextContent();
                                textEl.classList.add('visible');
                                noteEl.style.opacity = '0.7';
                            }
                            if (finished === particleCount) {
                                btn.style.opacity = '1';
                                btn.style.pointerEvents = 'auto';
                                setTimeout(() => {
                                    particleData.forEach(d => d.el.remove());
                                }, 500);
                            }
                        }, item.duration);
                    }, item.delay);
                });
            });
        }

        function updateTextContent() {
            let newIndex;
            // 确保不连续抽到同一条
            do { newIndex = Math.floor(Math.random() * greetings.length); } 
            while (newIndex === currentIndex);
            currentIndex = newIndex;
            textEl.innerText = greetings[currentIndex].text;
            noteEl.innerText = `—— ${greetings[currentIndex].note}`;
        }

        function handleCopy(event) {
            addRipple(event);
            const textToCopy = `${textEl.innerText}\n${noteEl.innerText}`;
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(textToCopy).then(showToast);
            } else {
                const textArea = document.createElement("textarea");
                textArea.value = textToCopy;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
                showToast();
            }
        }

        function showToast() {
            toastEl.classList.add('show');
            setTimeout(() => toastEl.classList.remove('show'), 2000);
        }

        window.onload = function() {
            initBgParticles();
            updateTextContent();
            setTimeout(() => {
                textEl.classList.add('visible');
                noteEl.style.opacity = '0.7';
            }, 300);
        };
    </script>
</body>
</html>
